{"version":3,"sources":["blob.ts"],"names":["Game","Game.Vector","Game.Vector.constructor","Game.Blob","Game.Blob.constructor","Game.resolveCollision","Game.roughCollisionCheck","Game.collide","Game.drawStuff","Game.resizeCanvas","Game.generateId","Game.addRandomBlob","Game.init","Game.registerEventListeners"],"mappings":"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","file":"blob.js","sourcesContent":["/// <reference path=\"jquery.d.ts\" />\nmodule Game{\n  var realWidth: number;\n  var realHeight: number;\n\n  var absorb:number = .1;\n  var RESTI:number = .4;\n  var TWOPI:number = Math.PI * 2;\n\n  var useBlobColors: boolean = false;\n  var absorbMode: boolean = false;\n\n  var members = [];\n  var canvas = <HTMLCanvasElement> document.getElementById('canvas');\n\n  class Vector {\n    x: number;\n    y: number;\n\n    constructor(x: number, y: number){\n      this.x = x;\n      this.y = y;\n    }\n    subtract = function(vector: Vector) {\n      return new Vector(this.x - vector.x, this.y - vector.y);\n    }\n    add = function(vector: Vector) {\n      return new Vector(this.x + vector.x, this.y + vector.y);\n    }\n    multiply = function(val: number) {\n      return new Vector(this.x * val, this.y * val);\n    }\n    dot = function(v: Vector) {\n      return (this.x * v.x) + (this.y * v.y);\n    }\n    vectorMultiply = function(v: Vector) {\n      return new Vector(this.x * v.x, this.y * v.y);\n    }\n    normalize = function() {\n      var l = this.length();\n      var nX, nY;\n      if (l !== 0) {\n        nX = this.x / l;\n        nY = this.y / l;\n      } else {\n        nX = 0;\n        nY = 0;\n      }\n\n      return new Vector(nX, nY);\n    }\n\n    reverseX = function() {\n      this.x *= -1;\n    }\n    reverseY = function() {\n      this.y *= -1;\n    }\n    reverse = function() {\n      this.reverseX();\n      this.reverseY();\n    }\n    length = function() {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n    distance = function(v: Vector) {\n      return Math.sqrt((v.x - this.x) * (v.x - this.x) + (v.y - this.y) * (v.y - this.y));\n    }\n    direction = function() {\n      var x = this.x / Math.abs(x);\n      var y = this.y / Math.abs(y);\n      return new Vector(x, y);\n    }\n  }\n\n  class Blob {\n    id     : string;\n    size   : number;\n    color  : string;\n    pos    : Vector;\n    v      : Vector;\n    canvas : HTMLCanvasElement;\n    ctx    : CanvasRenderingContext2D;\n\n    constructor (x: number, y: number, id: string, canvas: HTMLCanvasElement){\n      this.id = id;\n      this.size = Math.floor(Math.random() * 10) + 6;\n      this.color = '#' + Math.floor(Math.random() * 16777215).toString(16);\n      this.pos = new Vector(x, y);\n      this.v = new Vector(0, 0);\n      this.canvas = canvas;\n      this.ctx = <CanvasRenderingContext2D> canvas.getContext('2d');\n    }\n\n    bump = function(n: number){\n      this.v.y += Math.random() >= 0.5 ? 1 : -1 * n;\n      this.v.x += Math.random() >= 0.5 ? 1 : -1 * n;\n    }\n    move = function(){\n      this.pos.x += this.v.x;\n      this.pos.y += this.v.y;\n\n      // Check for collision with walls\n      if (this.pos.x - this.size < 0)\n      {\n        this.pos.x = this.size;   // Place ball against edge\n        this.v.x = -(this.v.x * RESTI);// Reverse direction and account for friction\n      }\n      else if (this.pos.x + this.size > realWidth) // Right Wall\n      {\n        this.pos.x = realWidth - this.size;    // Place ball against edge\n        this.v.x = -(this.v.x * RESTI);// Reverse direction and account for friction\n      }\n\n      if (this.pos.y - this.size < 0)       // Top Wall\n      {\n        this.pos.y = this.size;   // Place ball against edge\n        this.v.y = -(this.v.y * RESTI);// Reverse direction and account for friction\n      }\n      else if (this.pos.y + this.size > realHeight) // Bottom Wall\n      {\n        this.pos.y = realHeight - this.size;   // Place ball against edge\n        this.v.y = -(this.v.y * RESTI);// Reverse direction and account for friction\n      }\n    };\n    collisionCheck = function(){\n      for(var i = 0; i < members.length; i++){\n        if (members[i].id !== this.id){\n          if (roughCollisionCheck(this, members[i])){\n            if (collide(this, members[i])){\n              resolveCollision(this, members[i]);\n            }\n          }\n        }\n      }\n    };\n    draw = function(ctx){\n      ctx.beginPath();\n      ctx.arc(this.pos.x, this.pos.y, this.size, 0, TWOPI, true);\n      //ctx.fillStyle = this.color;\n      var color = this.color;\n      if (!useBlobColors){\n        var MAX = 3;\n        var red = Math.floor(255 * Math.abs(this.v.y) / MAX);\n        //console.log(red);\n        var green = 255 - red;\n        color = 'rgb(' + red + \",\" + green + ',0)';\n      }\n      ctx.fillStyle = color;\n      ctx.closePath();\n      ctx.fill();\n    };\n  }\n\n  function resolveCollision(b1: Blob, b2: Blob) {\n\n    // get the mtd\n    var delta = (b1.pos.subtract(b2.pos));\n    var r = b1.size + b2.size;\n    var dist2 = delta.dot(delta);\n    var mtd;\n\n    if (dist2 > r * r){\n      return; // they aren't colliding\n    }\n\n    if ( absorbMode\n        && b1.size > b2.size\n        && (2 * (b1.size + absorb) < realHeight)\n        && (2 * (b1.size + absorb) < realWidth) ){\n      b1.size += absorb / 3;\n      b2.size = Math.max(0, b2.size - absorb);\n      //console.log(b1.size + ':' + b2.size);\n      if (b2.size === 0) {\n        members.splice(members.indexOf(b2), 1);\n      }\n    }\n\n    var d = delta.length();\n    //console.log(d);\n    if (d !== 0.0) {\n      // minimum translation distance to push balls apart after intersecting\n      mtd = delta.multiply(((b1.size + b2.size) - d) / d);\n    } else {\n      // Special case. Balls are exactly on top of eachother.\n      // Don't want to divide by zero.\n      d = b1.size + b2.size - 1.0;\n      delta = new Vector(b1.size + b2.size, 0.0);\n      mtd = delta.multiply(((b1.size + b2.size) - d) / d);\n    }\n    // resolve intersection\n    var im1 = 1 / (b1.size); // inverse mass quantities\n    var im2 = 1 / (b2.size);\n    //console.log(mtd.length());\n    // push-pull them apart\n\n\n    b1.pos = b1.pos.add(mtd.multiply(im1 / (im1 + im2)));\n    b2.pos = b2.pos.subtract(mtd.multiply(im2 / (im1 + im2)));\n\n    // impact speed\n    var v = (b1.v.subtract(b2.v));\n    mtd = mtd.normalize();\n    var vn = v.dot(mtd);\n    // sphere intersecting but moving away from each other already\n    if (vn > 0){\n      return;\n    }\n\n    // collision impulse\n    var i = -((1.0 + RESTI) * vn) / (im1 + im2);\n    var impulse = mtd.multiply(i);\n    // change in momentum\n    //console.log(impulse.length());\n    b1.v = b1.v.add(impulse.multiply(im1));\n    b2.v = b2.v.subtract(impulse.multiply(im2));\n  }\n\n\n  function roughCollisionCheck(b1: Blob, b2: Blob){\n    return (b1.pos.x + b1.size + b2.size > b2.pos.x\n        && b1.pos.x < b2.pos.x + b1.size + b2.size\n        && b1.pos.y + b1.size + b2.size > b2.pos.y\n        && b1.pos.y < b2.pos.y + b1.size + b2.size)\n  }\n\n  function collide(b1, b2){\n    var distance = Math.sqrt(Math.pow(b2.pos.x - b1.pos.x, 2) + Math.pow(b2.pos.y - b1.pos.y, 2));\n    return distance < b1.size + b2.size;\n  }\n\n\n  function drawStuff() {\n    var ctx = <CanvasRenderingContext2D> canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    for (var i = 0; i < members.length; i++){\n      members[i].move(ctx);\n    }\n    for (var i = 0; i < members.length; i++){\n      members[i].collisionCheck(ctx);\n      members[i].draw(ctx);\n    }\n\n    window.requestAnimationFrame(drawStuff);\n  }\n\n  function resizeCanvas() {\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight * 0.80;\n\n    scaleCanvas();\n    drawStuff();\n  }\n\n  var backingScale = function() {\n    if ('devicePixelRatio' in window) {\n      if (window.devicePixelRatio > 1) {\n        return window.devicePixelRatio;\n      }\n    }\n    return 1;\n  };\n\n  var scaleCanvas = function(){\n    var scaleFactor = backingScale();\n    realWidth = canvas.width;\n    realHeight = canvas.height;\n    if (scaleFactor > 1) {\n      var oldWidth: number = canvas.width;\n      var oldHeight: number = canvas.height;\n      canvas.width = canvas.width * scaleFactor;\n      canvas.height = canvas.height * scaleFactor;\n      // update the context for the new canvas scale\n      var ctx: CanvasRenderingContext2D = <CanvasRenderingContext2D> canvas.getContext('2d');\n      ctx.scale(scaleFactor, scaleFactor);\n      canvas.style.width = realWidth + \"px\";\n      canvas.style.height = realHeight + \"px\";\n    }\n  };\n\n  function generateId(): string{\n    return \"\" + Math.floor(Math.random() * 1000000000);\n  }\n\n  function addRandomBlob(){\n    let blob: Blob = new Blob(Math.random() * realWidth,\n                              Math.random() * realHeight,\n                              generateId(),\n                              canvas);\n    blob.bump(Math.round(Math.random() * 3));\n    members.push(blob);\n  }\n\n  export function init(){\n    realWidth  = canvas.width;\n    realHeight = canvas.height;\n\n    window.addEventListener('resize', resizeCanvas, false);\n    addRandomBlob();\n    resizeCanvas();\n    registerEventListeners();\n  }\n\n  function registerEventListeners(){\n    $('#canvas').on('mouseup', function(event){\n      var blob: Blob = new Blob(event.offsetX,\n                                event.offsetY,\n                                generateId(),\n                                canvas);\n      members.push(blob);\n    });\n\n    $('.title .whoa').on('mouseup', function(){\n      console.log('toggle blob colors');\n      useBlobColors = !useBlobColors;\n    });\n\n    $('#gen10').on('click', function(){\n      for (let i = 0; i < 10; i++){ addRandomBlob(); }\n    });\n\n    $('#gen100').on('click', function(){\n      for (let i = 0; i < 100; i++){ addRandomBlob(); }\n    });\n\n    $('.title .bold').on('mouseup', function(){\n      members.forEach( (member) => member.bump(Math.round(Math.random() * 3)))\n    });\n  }\n}\n"],"sourceRoot":"/source/"}